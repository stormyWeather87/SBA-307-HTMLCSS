var tdsLeads={};
(function(){tdsLeads={items:[],init:function(){tdsLeads.items=[]},item:function(){this.jqueryObj=this.blockUid=void 0;this.submitHasErrors=this.isSubmit=this.inComposer=!1;this.messages={ack_require:"",captcha_user_score:"",captcha_failed:""};this._is_initialized=!1},_initialize_item:function(a){if(!0!==a._is_initialized){var c="g-recaptcha-response-leads-"+a.blockUid,b=jQuery("#"+c);if("show"===tdUtil.getBackendVar("tds_captcha")&&1===b.length){var d=b.attr("data-sitekey");grecaptcha.ready(function(){grecaptcha.execute(d,{action:"validate_captcha"}).then(function(a){document.getElementById(c).value=
a})})}a.jqueryObj.find(".tds-submit-btn").on("click",function(b){var d=jQuery(this).data("url"),h=a.jqueryObj.find(".tds-checkbox"),c=a.jqueryObj.find(".tds-messages-error");a.jqueryObj.find(".tds-form");var f=!1;h.length&&(h=a.jqueryObj.find("#pp_checkbox_"+a.blockUid),h.length&&!h.is(":checked")&&(b.preventDefault(),f=!0,c.length?c.find(".tds-message-checkbox").length||c.append('<div class="tds-message tds-message-checkbox">'+a.messages.ack_require+"</div>"):a.jqueryObj.find(".tds-info").prepend('<div class="tds-messages tds-messages-error"><div class="tds-message tds-message-checkbox">'+
a.messages.ack_require+"</div></div>"),setTimeout(function(){var b=jQuery("."+a.blockUid+" .tds-messages");b.length&&(b.addClass("tds-messages-hiding"),setTimeout(function(){b.remove()},300))},3E3)));f||"undefined"===typeof d||(b.preventDefault(),window.location.replace(d))});a.jqueryObj.find("#pp_checkbox_"+a.blockUid).change(function(){var b=jQuery(this),d=a.jqueryObj.find(".tds-messages-error"),c=d.find(".tds-message-checkbox");b.is(":checked")&&(c.remove(),d.is(":empty")&&d.remove())});a._is_initialized=
!0}},addItem:function(a){if("undefined"===typeof a.blockUid)throw"item.blockUid is not defined";tdsLeads.items.push(a);tdsLeads._initialize_item(a)},deleteItem:function(a){for(var c=0;c<tdsLeads.items.length;c++)if(tdsLeads.items[c].blockUid===a)return tdsLeads.items.splice(c,1),!0;return!1}}})();jQuery().ready(function(){tdsLeads.init()});var tdsStore;
(function(a,c,b){tdsStore={_db:b,_dbName:b,_dbStoreName:b,_indexedDB:b,_isInitialized:!1,init:function(a,b){tdsStore._isInitialized||(tdsStore._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,tdsStore._indexedDB?(tdsStore._dbName=a,tdsStore._dbStoreName=b):console.log("Your browser doesn't support a stable version of IndexedDB!"),tdsStore._isInitialized=!0)},openDb:function(){if(tdsStore._isInitialized){var a=tdsStore._indexedDB.open(tdsStore._dbName);a.onsuccess=
function(a){tdsStore._db=this.result};a.onupgradeneeded=function(a){a.currentTarget.result.createObjectStore(tdsStore._dbStoreName,{keyPath:"id"})}}},getObjectStore:function(a,b){if(tdsStore._isInitialized)return tdsStore._db.transaction(a,b).objectStore(a)},add:function(a,b){if(tdsStore._isInitialized){a={id:a,content:b};b=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var d=b.put(a)}catch(e){throw console.log(e.name),e;}d.onsuccess=function(a){};d.onerror=function(){}}},get:function(b){var d=
a.Deferred(),c=tdsStore.getObjectStore(tdsStore._dbStoreName,"readwrite");try{var e=c.get(b)}catch(g){throw console.log(g.name),g;}e.onsuccess=function(a){d.resolve(this)};e.onerror=function(){};return d}};tdsStore.init("Leads","Cache");tdsStore.openDb()})(jQuery,_);var tdsMain={};
(function(){tdsMain={init:function(){jQuery("body").on("click",".tds-choose-plan-type",function(a){a.preventDefault();a=jQuery(this);var b=a.data("type");"undefined"!==typeof b&&(a=a.data("url-"+b),"undefined"!==typeof a&&(window.location=a))}).on("click",".tds-switcher",function(){tdsMain.setActivePlan(jQuery(this).val())}).on("click",".tds-choose-plan-type-free",function(a){a.preventDefault();a=jQuery(this);var b=a.data("type");"undefined"!==typeof b&&(a=a.data("url-"+b),"undefined"!==typeof a&&
(window.location=a))}).on("click",".tds-s-table-col-expand",function(a){a=jQuery(this);var b=a.find(".tds-s-table-col-label"),c=a.closest(".tds-s-table-row"),k=c.nextAll(".tds-s-table-row-extra-wrap-info:first");c.length&&k.length&&(b.text(b.text()===window.tds_show_more_info?window.tds_show_less_info:window.tds_show_more_info),a.attr("title",a.attr("title")===window.tds_show_more_info?window.tds_show_less_info:window.tds_show_more_info),c.toggleClass("tds-s-table-row-info-expanded"),c.toggleClass("tds-s-table-row-active"),
k.toggle())}).on("click",".tds-resend-activation-link",function(a){var b=jQuery(this),c=b.siblings(".tds-s-notif-descr"),k=b.siblings(".tds-s-notif-js").text();a=b.data("user");"undefined"!==typeof a&&(b.addClass("tds-s-btn-saving"),jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_resend_subscription_activation_link",user:a},success:function(a,d,f){a=jQuery.parseJSON(a);switch(a[0]){case "resend_activation_link":b.next(".tds-info").show().html(a[2]),1===a[1]?(b.addClass("tds-s-btn-saved"),
c.text(k)):b.removeClass("tds-s-btn-saving")}},error:function(a,b,c){}}))});var a=jQuery(".tds-paypal-button");a.length&&a.each(function(a,c){var b=jQuery(c),d=b.closest(".tds-s-table-row").data("subscription-id");a='tr[data-subscription-id="'+d+'"] .tds-paypal-button';paypal.Buttons({fundingSource:paypal.FUNDING.PAYPAL,createOrder:function(a,c){return c.order.create({purchase_units:[{amount:{value:b.data("value"),currency:b.data("currency")}}],application_context:{shipping_preference:"NO_SHIPPING"}})},
onApprove:function(a,c){return c.order.capture().then(function(a){b.hide();a={order_id:a.id,order_intent:a.intent,order_status:a.status,order_payer_id:a.payer.payer_id,order_payer_given_name:a.payer.name.given_name,order_payer_surname:a.payer.name.surname,order_payer_email:a.payer.email_address,order_payee_id:a.purchase_units[0].payee.merchant_id,order_payee_email:a.purchase_units[0].payee.email_address,order_amount_currency_code:a.purchase_units[0].amount.currency_code,order_amount_value:a.purchase_units[0].amount.value,
order_info:JSON.stringify(a,null,2),order_create_time:a.create_time,order_update_time:a.update_time,order_capture_create_time:a.purchase_units[0].payments.captures[0].create_time,order_capture_update_time:a.purchase_units[0].payments.captures[0].update_time};jQuery.ajax({timeout:1E4,type:"POST",url:tdsMain.get_rest_endpoint("tds_subscription/update_paypal_subscription","uuid="+tdsMain.get_unique_id()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce)},cache:!1,
dataType:"json",data:{subscriptionId:d,paypalOrderData:a},success:function(a,b,c){"undefined"!==typeof a.error&&console.log(a.error)},error:function(a,b,c){console.log("tds save settings - Error callback - textStatus: "+b+" errorThrown: "+c)}})})}}).render(a)});a=jQuery(".tds-switcher:checked");var c="year";a.length&&(c=a.val());tdsMain.setActivePlan(c)},get_rest_endpoint:function(a,c){return _.isEmpty(window.tds_js_globals.permalinkStructure)?window.tds_js_globals.wpRestUrl+a+"&"+c:window.tds_js_globals.wpRestUrl+
a+"?"+c},get_unique_id:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},setActivePlan:function(a){var c=jQuery(".tds-choose-plan-type").not(".tds-switcher-change"),b=jQuery(".tds_plans_price, .tds_plans_description");c.each(function(b,c){b=jQuery(c);b.data("type",a);"undefined"===typeof b.data("url-"+a)?b.attr("disabled",!0):b.removeAttr("disabled")});b.each(function(b,c){b=jQuery(c);c=b.data("type-from-block");
var d=b.find('[class*="tds-show-plan-"]'),e=b.find(".tds-plan-placeholder"),g=a,f=!1;"undefined"!==typeof c&&""!==c&&"free"!==c&&(g=c);d.length?(d.each(function(a,b){a=jQuery(b);b=a.data("type");"undefined"!==typeof b&&b===g?(a.hasClass("tds-show-plan-visible")||a.addClass("tds-show-plan-visible"),window.location!==window.parent.location&&e.hasClass("tds-plan-placeholder-visible")&&e.removeClass("tds-plan-placeholder-visible"),f=!0):a.removeClass("tds-show-plan-visible")}),!1===f&&window.location!==
window.parent.location&&(e.hasClass("tds-plan-placeholder-visible")||e.addClass("tds-plan-placeholder-visible"))):"free"!==c&&(window.location!==window.parent.location?e.hasClass("tds-plan-placeholder-visible")||e.addClass("tds-plan-placeholder-visible"):b.remove())})},b64EncodeUnicode:function(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))},b64DecodeUnicode:function(a){return decodeURIComponent(atob(a).split("").map(function(a){return"%"+
("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(a,c){tdsStore.add(a,c)},getStorageItem:function(a){return tdsStore.get(a)},setLocalStorageItem:function(a,c){var b=tdsMain._getStorage();b=null===b?{}:JSON.parse(tdsMain.b64DecodeUnicode(b));b[a]=c;tdsMain._setStorage(tdsMain.b64EncodeUnicode(JSON.stringify(b)))},getLocalStorageItem:function(a){var c=tdsMain._getStorage();if(null!==c)try{if(c=JSON.parse(tdsMain.b64DecodeUnicode(c)),c.hasOwnProperty(a))return c[a]}catch(b){}},
clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(a){window.localStorage.setItem(window.tdcAdminSettings.themeName,a)}}})();jQuery().ready(function(){tdsMain.init()});
